webpackJsonp([1],{"3KXh":function(t,s){},"3LJT":function(t,s,i){"use strict";var e=i("dNqS"),n=i("vbtD"),a=i("VU/8"),r=a(e.a,n.a,!1,null,null,null);s.a=r.exports},"6vPp":function(t,s){},CAjU:function(t,s,i){"use strict";s.a={name:"Markers",data:function(){return{letters:["а","б","в","г","д","e","ж","з","и","к"],numbers:["1","2","3","4","5","6","7","8","9","10"],handler:function(){console.log("hideDrop event")}}},methods:{},mounted:function(){this.$root.$on("hideDrop",this.handler)},beforeDestroy:function(){this.$root.$off("hideDrop",this.handler)}}},FKyQ:function(t,s,i){"use strict";function e(t){i("3KXh")}var n=i("i+cV"),a=i("nUWa"),r=i("VU/8"),o=e,c=r(n.a,a.a,!1,o,null,null);s.a=c.exports},HI37:function(t,s,i){t.exports=i.p+"static/img/tt_logo_ru.c93fcc6.png"},M93x:function(t,s,i){"use strict";function e(t){i("lLg2")}var n=i("xJD8"),a=i("bW+O"),r=i("VU/8"),o=e,c=r(n.a,a.a,!1,o,null,null);s.a=c.exports},NHnr:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("7+uW"),n=i("M93x"),a=i("YaEn");e.a.config.productionTip=!1,new e.a({el:"#app",router:a.a,template:"<App/>",components:{App:n.a}})},RcUN:function(t,s,i){"use strict";var e=i("3LJT"),n=i("oCiq"),a=i("woXc"),r=i("FKyQ");s.a={name:"Game",data:function(){return{msg:"Морской бой.",showStartBattlefield:!0,showMyBattlefield:!1}},methods:{startGame:function(){console.log("Старт игры"),this.showStartBattlefield=!1,this.showMyBattlefield=!0},editBf:function(){this.showStartBattlefield=!0,this.showMyBattlefield=!1},logStore:function(){console.log(n.a)}},components:{"b-start-bf":e.a,"b-rival-bf":r.a,"b-my-bf":a.a},mounted:function(){var t=this;window.addEventListener("click",function(){console.log("dispatchEvent hideDrop"),t.$root.$emit("hideDrop")})}}},Rr8t:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("b-markers"),t._v(" "),i("div",{staticClass:"b-battlefield b-canvas-wrapper"},[i("div",{staticClass:"b-grid"},[i("table",{staticClass:"b-grid-table"},[i("tbody",[i("tr",t._l(t.items,function(s){return i("td",{key:s.index,staticClass:"b-grid-item",class:[s.classes,{"b-grid-item--miss":s.miss,"b-grid-item--miss-auto":s.missAuto,"b-grid-item--hit":s.hit,"b-grid-item--done":s.done}]},[i("div",{staticClass:"b-grid-item-content"},[i("span",{staticClass:"b-grid-item-status"}),t._v(" "),s.ship?i("span",{staticClass:"b-ship",class:[s.ship.getClasses()]}):t._e()])])}),0)])])])]),t._v(" "),i("div",{staticClass:"mt-2"},[t._v("\n        Ваше поле\n    ")])],1)},n=[],a={render:e,staticRenderFns:n};s.a=a},T5gi:function(t,s,i){"use strict";function e(t){i("6vPp")}var n=i("CAjU"),a=i("uUJ7"),r=i("VU/8"),o=e,c=r(n.a,a.a,!1,o,null,null);s.a=c.exports},"X+YH":function(t,s,i){"use strict";i.d(s,"a",function(){return u});var e=i("BO1k"),n=i.n(e),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),c=i.n(o),l=function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r()(this,t),this.name="ship",this.long=1,this.x=0,this.y=0,this.vertical=!0,this.index=!1,s.long&&(this.long=s.long),s.x>-1&&s.y>-1&&(this.x=s.x,this.y=s.y),void 0!==s.vertical&&(this.vertical=s.vertical),s.index>-1&&(this.index=s.index)}return c()(t,[{key:"drawShip",value:function(t){var s=h.size,i=void 0,e=void 0;this.vertical?(i=s+1,e=s*this.long+1):(i=s*this.long+1,e=s+1),this.rect=t.rect(-100,-100,i,e).attr({fill:"white"}),this.rect.node.classList.add("b-svg-ship"),this.rect.dblclick(function(){if(this.self.vertical=!this.self.vertical,!h.checkFloorAccess({x:this.self.x,y:this.self.y},this.self))return this.self.vertical=!this.self.vertical,!1;this.self.updateVertical()}),this.rect.self=this,this.updateCoords()}},{key:"updateCoords",value:function(){var t=this.x*h.size+h.offsetX,s=this.y*h.size+h.offsetY;this.rect.attr({x:t-1,y:s-1})}},{key:"updateVertical",value:function(){var t=void 0,s=void 0;this.vertical?(t=1,s=this.long):(t=this.long,s=1),this.rect.attr({width:h.size*t,height:h.size*s})}}]),t}(),h={lengthTypes:[4,3,3,2,2,2,1,1,1,1],size:36,offsetX:30,offsetY:30,maxX:9,maxY:9,rivalPoints:[],demoCoords:[{x:5,y:0,v:!1},{x:1,y:7,v:!0},{x:3,y:3,v:!0},{x:7,y:3,v:!1},{x:7,y:5,v:!1},{x:6,y:9,v:!1},{x:7,y:7,v:!0},{x:9,y:7,v:!1},{x:9,y:9,v:!1},{x:1,y:4,v:!1}],accessZone:[],drawBattleground:function(t){for(var s=0;s<this.maxY+1;s++){this.accessZone[s]=[];for(var i=0;i<this.maxX+1;i++){this.accessZone[s][i]={access:!0,isShip:!1};t.rect(this.offsetX+this.size*i,this.offsetY+this.size*s,this.size,this.size).attr({fill:"#fff"}).node.classList.add("b-svg-grid-item")}}},clearAccessZone:function(){for(var t=0;t<this.maxY+1;t++)for(var s=0;s<this.maxX+1;s++)this.accessZone[t][s].access=!0,this.accessZone[t][s].isShip=!1,this.accessZone[t][s].isArea=!1},fillAccessZone:function(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.clearAccessZone();var i=!0,e=!1,a=void 0;try{for(var r,o=n()(t);!(i=(r=o.next()).done);i=!0){var c=r.value;if(!s||c.index!==s.index){this.accessZone[c.y][c.x].access=!1,this.accessZone[c.y][c.x].isShip=!0;for(var l=1;l<c.long;l++){var h=void 0,u=void 0;c.vertical?(u=c.y+l,h=c.x):(h=c.x+l,u=c.y),this.accessZone[u][h].access=!1,this.accessZone[u][h].isShip=!0}}}}catch(t){e=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(e)throw a}}for(var d=0;d<this.maxY+1;d++)for(var f=0;f<this.maxX+1;f++)if(!0===this.accessZone[d][f].isShip)for(var v=-1;v<=1;v++)for(var m=-1;m<=1;m++){var p=f+m,b=d+v;this.checkPosInFloor({x:p,y:b})&&!0===this.accessZone[b][p].access&&(this.accessZone[b][p].access=!1,this.accessZone[b][p].isArea=!0)}},checkPosInFloor:function(t){return!(t.x<0||t.y<0||t.x>this.maxX||t.y>this.maxY)},checkFloorAccess:function(t,s){for(var i=0;i<s.long;i++){var e=void 0,n=void 0;if(s.vertical?(n=t.y+i,e=t.x):(e=t.x+i,n=t.y),!this.checkPosInFloor({x:e,y:n}))return!1;if(!1===this.accessZone[n][e].access)return!1}return!0}},u={R:{},arShips:[],run:!1,onMove:function(t,s){var i=Math.round((this.ox+t)/h.size-1)*h.size+h.offsetX,e=Math.round((this.oy+s)/h.size-1)*h.size+h.offsetY;this.attr({x:i-1,y:e-1})},onStart:function(t,s,i){this.node.classList.add("b-svg-ship--moveble"),this.ox=this.attr("x"),this.old_x=this.attr("x"),this.oy=this.attr("y"),this.old_y=this.attr("y")},onEnd:function(t){this.node.classList.remove("b-svg-ship--moveble"),u.setCoordsOnEnd(this),this.self.updateCoords()},setCoordsOnEnd:function(t){var s=Math.round((t.attr("x")-h.offsetX)/h.size),i=Math.round((t.attr("y")-h.offsetY)/h.size);s<0&&(s=0),i<0&&(i=0),s>h.maxX&&(s=h.maxX),i>h.maxY&&(i=h.maxY),this.checkNewPos(t,{x:s,y:i})&&(t.self.x=Math.abs(s),t.self.y=Math.abs(i))},checkNewPos:function(t,s){return h.fillAccessZone(this.arShips,t.self),!(s.x<0||s.y<0)&&(!(s.x>h.maxX||s.y>h.maxY)&&!!h.checkFloorAccess(s,t.self))},start:function(){if(this.run)return 1;this.run=!0,this.R=Raphael("start-battlefield",400,400),h.drawBattleground(this.R);var t=0,s=!0,i=!1,e=void 0;try{for(var a,r=n()(h.lengthTypes);!(s=(a=r.next()).done);s=!0){var o=a.value,c=h.demoCoords[t].x,u=h.demoCoords[t].y,d=h.demoCoords[t].v;this.arShips.push(new l({long:o,x:c,y:u,vertical:d,index:t})),t++}}catch(t){i=!0,e=t}finally{try{!s&&r.return&&r.return()}finally{if(i)throw e}}var f=!0,v=!1,m=void 0;try{for(var p,b=n()(this.arShips);!(f=(p=b.next()).done);f=!0){var g=p.value;g.drawShip(this.R),g.rect.drag(this.onMove,this.onStart,this.onEnd)}}catch(t){v=!0,m=t}finally{try{!f&&b.return&&b.return()}finally{if(v)throw m}}h.fillAccessZone(this.arShips)}}},YCYz:function(t,s,i){"use strict";var e=i("BO1k"),n=i.n(e),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),c=i.n(o),l=i("T5gi"),h=i("oCiq");_=i("M4fF");var u=function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r()(this,t),this.vertical=!1,this.long=1,this.done=!1,s.done&&(this.done=s.done),s.long&&(this.long=s.long),s.vertical&&(this.vertical=s.vertical)}return c()(t,[{key:"getClasses",value:function(){return[this.vertical?"b-ship--pos-v-"+this.long:"b-ship--pos-h-"+this.long,this.done?"b-ship--done":""]}}]),t}();s.a={name:"Battlefield",data:function(){return{}},computed:{items:function(){return h.a.gridItems}},created:function(){if(h.a.gridItems.length<1)for(var t=0,s=0;s<10;s++)for(var i=0;i<10;i++)h.a.gridItems.push({x:i,y:s,index:t,miss:!1,missAuto:!1,hit:!1,done:!1,empty:!1,ship:!1,classes:["b-grid-item--x-"+i,"b-grid-item--y-"+s]}),t++;this.createMyShips()},methods:{createMyShips:function(){var t=h.a.startShips,s=!0,i=!1,e=void 0;try{for(var a,r=n()(t);!(s=(a=r.next()).done);s=!0){var o=a.value;!function(t){_.find(h.a.gridItems,function(s){return s.x===t.x&&s.y===t.y}).ship=new u({vertical:t.vertical,long:t.long,done:!1})}(o)}}catch(t){i=!0,e=t}finally{try{!s&&r.return&&r.return()}finally{if(i)throw e}}console.log("createMyShips",h.a)}},components:{"b-markers":l.a}}},YaEn:function(t,s,i){"use strict";var e=i("7+uW"),n=i("/ocq"),a=i("tZZY");e.a.use(n.a),s.a=new n.a({routes:[{path:"/",name:"Game",component:a.a}]})},"bW+O":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),i("router-view")],1)},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"b-logo"},[e("img",{attrs:{src:i("HI37")}})])}],a={render:e,staticRenderFns:n};s.a=a},dNqS:function(t,s,i){"use strict";var e=i("T5gi"),n=i("X+YH"),a=i("oCiq");s.a={name:"StartingBattlefield",data:function(){return{}},mounted:function(){n.a.start(),a.a.startShips=n.a.arShips},methods:{check:function(t){console.log("Engine",n.a)}},components:{"b-markers":e.a}}},"i+cV":function(t,s,i){"use strict";var e=i("Zrlr"),n=i.n(e),a=i("wxAW"),r=i.n(a),o=i("T5gi"),c=i("oCiq");!function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n()(this,t),this.vertical=!1,this.long=1,s.long&&(this.long=s.long),s.vertical&&(this.vertical=s.vertical)}r()(t,[{key:"getClasses",value:function(){return[this.vertical?"b-ship--pos-v-"+this.long:"b-ship--pos-h-"+this.long]}}])}();s.a={name:"Battlefield",data:function(){return{gridItems:[]}},computed:{items:function(){return this.gridItems}},created:function(){for(var t=0,s=0;s<10;s++)for(var i=0;i<10;i++)this.gridItems.push({x:i,y:s,index:t,miss:!1,missAuto:!1,hit:!1,empty:!0,ship:!1,classes:["b-grid-item--x-"+i,"b-grid-item--y-"+s]}),t++},methods:{onGridItemClick:function(t){c.a.count++,t.empty=!1,t.miss?(t.miss=!1,t.hit=!0):(t.miss=!0,t.hit=!1)}},components:{"b-markers":o.a}}},iA2N:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"b-container"},[i("div",{staticClass:"b-row"},[i("div",{staticClass:"b-col b-col-left"},[t.showStartBattlefield?i("b-start-bf"):t._e(),t._v(" "),t.showMyBattlefield?i("b-my-bf"):t._e()],1),t._v(" "),i("div",{staticClass:"b-col b-col-right"},[t.showMyBattlefield?i("b-rival-bf"):t._e()],1)]),t._v(" "),i("div",{staticClass:"text-center mt-4"},[i("button",{staticClass:"btn btn-secondary",on:{click:t.startGame}},[t._v("Начать игру")])]),t._v(" "),i("div",{staticClass:" mt-4"},[i("button",{staticClass:"btn btn-",on:{click:t.logStore}},[t._v("Показать стор")]),t._v(" "),i("button",{staticClass:"btn btn-success",on:{click:t.editBf}},[t._v("Редактировать свое поле")])])])},n=[],a={render:e,staticRenderFns:n};s.a=a},lLg2:function(t,s){},nUWa:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("b-markers"),t._v(" "),i("div",{staticClass:"b-battlefield b-canvas-wrapper"},[i("div",{staticClass:"b-grid"},[i("table",{staticClass:"b-grid-table"},[i("tbody",[i("tr",t._l(t.items,function(s){return i("td",{key:s.index,staticClass:"b-grid-item",class:[s.classes,{"b-grid-item--miss":s.miss,"b-grid-item--miss-auto":s.missAuto,"b-grid-item--hit":s.hit,"b-grid-item--empty":s.empty,"b-grid-item--done":s.hit}],on:{click:function(i){t.onGridItemClick(s)}}},[i("div",{staticClass:"b-grid-item-content"},[i("span",{staticClass:"b-grid-item-status"}),t._v(" "),s.ship?i("span",{staticClass:"b-ship",class:[s.ship.getClasses()]}):t._e()])])}),0)])])])]),t._v(" "),i("div",{staticClass:"mt-2"},[t._v("\n        Поле противника\n    ")])],1)},n=[],a={render:e,staticRenderFns:n};s.a=a},oCiq:function(t,s,i){"use strict";s.a={name:"Store",count:0,startShips:[],gridItems:[],rivalGridItems:[]}},tZZY:function(t,s,i){"use strict";var e=i("RcUN"),n=i("iA2N"),a=i("VU/8"),r=a(e.a,n.a,!1,null,null,null);s.a=r.exports},uUJ7:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"b-markers-wrapper"},[i("div",{staticClass:"b-markers"},[i("ul",{staticClass:"b-markers-letters"},t._l(t.letters,function(s){return i("li",[t._v(t._s(s))])}),0),t._v(" "),i("ul",{staticClass:"b-markers-numbers"},t._l(t.numbers,function(s){return i("li",[t._v(t._s(s))])}),0)])])},n=[],a={render:e,staticRenderFns:n};s.a=a},vbtD:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("b-markers"),t._v(" "),i("div",{staticClass:"b-canvas-wrapper b-svg-grid",attrs:{id:"start-battlefield"}}),t._v(" "),i("div",{staticClass:"mt-2"},[t._v("\n        Ваше поле\n    ")])],1)},n=[],a={render:e,staticRenderFns:n};s.a=a},woXc:function(t,s,i){"use strict";var e=i("YCYz"),n=i("Rr8t"),a=i("VU/8"),r=a(e.a,n.a,!1,null,null,null);s.a=r.exports},xJD8:function(t,s,i){"use strict";s.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.46e9703f17c1e39cd457.js.map